<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contratos — Admin Fornería</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    .brand{color:#dc3545;font-weight:700}
    .avatar{width:40px;height:40px;border-radius:50%;object-fit:cover}
    .pdf-frame{width:100%;height:70vh;border:1px solid #e9ecef;border-radius:.5rem}
    .table thead th{white-space:nowrap}
  </style>
</head>
<body class="bg-light">
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg bg-white border-bottom sticky-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="#"><span class="h4 m-0 brand">Fornería</span></a>
      <div class="ms-auto d-flex align-items-center gap-2">
        <img src="https://via.placeholder.com/90" alt="mifoto" class="avatar">
        <span class="fw-semibold">Renato Muñoz (Admin)</span>
      </div>
    </div>
  </nav>

  <div class="container py-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h4 class="m-0">Contratos de empleados</h4>
      <a class="btn btn-outline-secondary btn-sm" href="admin_dashboard.html">Volver al panel</a>
    </div>

    <div class="card shadow-sm">
      <div class="card-body">
        <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-3">
          <div class="d-flex gap-2">
            <input id="q" class="form-control form-control-sm" placeholder="Buscar por nombre, cargo o estado">
            <button id="btnLimpiar" class="btn btn-outline-secondary btn-sm">Limpiar</button>
          </div>
          <div class="d-flex gap-2">
            <select id="fEstado" class="form-select form-select-sm">
              <option value="">Estado: todos</option>
              <option value="Vigente">Vigente</option>
              <option value="Finalizado">Finalizado</option>
              <option value="En firma">En firma</option>
            </select>
          </div>
        </div>

        <div class="table-responsive">
          <table class="table table-hover align-middle" id="tablaContratos">
            <thead class="table-light">
              <tr>
                <th>#</th>
                <th>Empleado</th>
                <th>Cargo</th>
                <th>Tipo</th>
                <th>Inicio</th>
                <th>Estado</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody><!-- filas dinámicas --></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- OFFCANVAS visor de contrato -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offContrato" aria-labelledby="offLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="offLabel">Contrato</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Cerrar"></button>
    </div>
    <div class="offcanvas-body">
      <div class="mb-3">
        <div class="fw-bold" id="cNombre">—</div>
        <div class="text-muted small" id="cCargo">—</div>
        <div class="mt-2">
          <span class="badge text-bg-secondary" id="cTipo">—</span>
          <span class="badge text-bg-success" id="cEstado">—</span>
        </div>
        <div class="small text-muted mt-1" id="cFechas">—</div>
      </div>

      <iframe class="pdf-frame" id="cPdf" src=""></iframe>

      <div class="d-grid gap-2 mt-3">
        <a class="btn btn-primary" id="btnDescargar" href="#" download>Descargar PDF</a>
        <button class="btn btn-outline-secondary" id="btnImprimir">Imprimir</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <scr
